<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="本文转自 Android中自定义视图View之—前奏篇  稍有修改，感谢分享！ 考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用接上文 Android 自定义 View(1) – 基础">
<meta name="keywords" content="Android,自定义 View">
<meta property="og:type" content="article">
<meta property="og:title" content="Android 自定义 View(2) -- 使用">
<meta property="og:url" content="http://09ae9c.com/2015/09/22/150922/index.html">
<meta property="og:site_name" content="09AE9C&#39;s Blog">
<meta property="og:description" content="本文转自 Android中自定义视图View之—前奏篇  稍有修改，感谢分享！ 考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用接上文 Android 自定义 View(1) – 基础">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://img.blog.csdn.net/20150924210415548">
<meta property="og:image" content="http://img.blog.csdn.net/20150925223447294">
<meta property="og:image" content="http://img.blog.csdn.net/20150926222656389">
<meta property="og:image" content="http://img.blog.csdn.net/20150927160153097">
<meta property="og:image" content="http://img.blog.csdn.net/20150927165750209">
<meta property="og:image" content="http://img.blog.csdn.net/20150927222715059">
<meta property="og:image" content="http://img.blog.csdn.net/20150927223637667">
<meta property="og:image" content="http://img.blog.csdn.net/20151002135216136">
<meta property="og:image" content="http://img.blog.csdn.net/20151002140035256">
<meta property="og:image" content="http://img.blog.csdn.net/20151004213035086">
<meta property="og:updated_time" content="2016-10-17T15:39:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android 自定义 View(2) -- 使用">
<meta name="twitter:description" content="本文转自 Android中自定义视图View之—前奏篇  稍有修改，感谢分享！ 考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用接上文 Android 自定义 View(1) – 基础">
<meta name="twitter:image" content="http://img.blog.csdn.net/20150924210415548">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Android 自定义 View(2) -- 使用</title>
    <!-- styles -->
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/meslo-LG/styles.css">
    <link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
    <!-- jquery -->
    <script src="/lib/jquery/jquery.min.js"></script>
</head>

<body>
    <div class="banner">
<div id="blogtitel" class="blogtitel">09AE9C&#39;s Blog</div>
<ul id="wrapper" class="wrapper">
  <div class="sun">
    <div class="star"></div>
  </div>
  <div class="mercury">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="venus">
    <div class="planet">
      <div class="shadow"></div>
    </div>
  </div>
  <div class="earth">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="mars">
    <div class="planet"><div class="shadow"></div></div>
  </div>
  <div class="jupiter">
    <div class="planet"><div class="shadow"></div></div>
  </div>
</ul>
</div>

    <div class="background">
      
        <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2015/09/27/150927/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$("#i-prev").toggle();" onmouseout="$("#i-prev").toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2015/09/21/150921/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$("#i-next").toggle();" onmouseout="$("#i-next").toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$("#i-top").toggle();" onmouseout="$("#i-top").toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$("#i-share").toggle();" onmouseout="$("#i-share").toggle();" onclick="$("#share").toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://09ae9c.com/2015/09/22/150922/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://09ae9c.com/2015/09/22/150922/&text=Android 自定义 View(2) -- 使用"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://09ae9c.com/2015/09/22/150922/&is_video=false&description=Android 自定义 View(2) -- 使用"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Android 自定义 View(2) -- 使用&body=Check out this article: http://09ae9c.com/2015/09/22/150922/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://09ae9c.com/2015/09/22/150922/&name=Android 自定义 View(2) -- 使用&description=&lt;p&gt;本文转自 &lt;a href=&#34;http://blog.csdn.net/jiangwei0910410003/article/details/42640665&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Android中自定义视图View之—前奏篇&lt;/a&gt;  稍有修改，感谢分享！&lt;/p&gt;
&lt;p&gt;考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用&lt;br&gt;接上文 &lt;a href=&#34;http://blog.csdn.net/ttccaaa/article/details/48690389&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Android 自定义 View(1) – 基础&lt;/a&gt;&lt;/p&gt;"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-自定义属性的使用"><span class="toc-number">1.</span> <span class="toc-text">1. 自定义属性的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-创建attrs-xml文件，编辑自定义属性的内容"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 创建attrs.xml文件，编辑自定义属性的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-在自定义的View中使用自定义属性"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 在自定义的View中使用自定义属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3在布局文件中使用自定义属性"><span class="toc-number">1.3.</span> <span class="toc-text">1.3在布局文件中使用自定义属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-重写onMeasure方法"><span class="toc-number">2.</span> <span class="toc-text">2.重写onMeasure方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-重写onDraw方法"><span class="toc-number">3.</span> <span class="toc-text">3.重写onDraw方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-实例一：自定义渐变的SeekBar"><span class="toc-number">4.</span> <span class="toc-text">4. 实例一：自定义渐变的SeekBar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例二：自定义闪烁文本的TextView"><span class="toc-number">5.</span> <span class="toc-text">实例二：自定义闪烁文本的TextView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例三：自定义颜色选择器"><span class="toc-number">6.</span> <span class="toc-text">实例三：自定义颜色选择器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例四-自定义圆形颜色渐变的SeekBar"><span class="toc-number">7.</span> <span class="toc-text">实例四 自定义圆形颜色渐变的SeekBar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例五-自定义折线图"><span class="toc-number">8.</span> <span class="toc-text">实例五 自定义折线图</span></a></li></ol>
    </div>
  </span>
</div>

      
      <div class="content index width mx-auto px2 my4">
          
          <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Android 自定义 View(2) -- 使用
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">09AE9C's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2015-09-22T13:10:10.000Z" itemprop="datePublished">2015-09-22</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/自定义-View/">自定义 View</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>本文转自 <a href="http://blog.csdn.net/jiangwei0910410003/article/details/42640665" target="_blank" rel="noopener">Android中自定义视图View之—前奏篇</a>  稍有修改，感谢分享！</p>
<p>考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用<br>接上文 <a href="http://blog.csdn.net/ttccaaa/article/details/48690389" target="_blank" rel="noopener">Android 自定义 View(1) – 基础</a></p>
<a id="more"></a>
<p>自定义View的流程为：</p>
<ul>
<li><strong>创建一个继承自View的自定义类</strong><br>当然也可以继承自任何View的子类，比如TextView，需要重写构造方法，构造方法有多个，但是必须要有两个参数的构造方法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public LabelView(Context context, AttributeSet attrs)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p><strong>定义属性</strong><br>也就是自定义View的各种属性，可以在xml文件中使用的属性，比如color，textSize等</p>
</li>
<li><p><strong>重写onMeasure方法</strong>（非必须）<br>用于计算View在屏幕中的大小</p>
</li>
<li><p><strong>重写onDraw方法</strong><br>用于在屏幕上绘制自定义View这里主要用到Paint和Canvas</p>
</li>
<li><p><strong>重写onTouch方法</strong><br>用于获取对屏幕的触摸事件，创建能够与用户交互的自定义View</p>
</li>
</ul>
<h2 id="1-自定义属性的使用"><a href="#1-自定义属性的使用" class="headerlink" title="1. 自定义属性的使用"></a>1. 自定义属性的使用</h2><p>在开始自定义View之前，先总结下自定义属性，很多时候自定义View都需要用到自定义属性。</p>
<h3 id="1-1-创建attrs-xml文件，编辑自定义属性的内容"><a href="#1-1-创建attrs-xml文件，编辑自定义属性的内容" class="headerlink" title="1.1 创建attrs.xml文件，编辑自定义属性的内容"></a>1.1 创建attrs.xml文件，编辑自定义属性的内容</h3><p>在values目录下创建自定义属性的attrs.xml文件(一般为这个文件名，当然也可以是其他命名)：<br><img src="http://img.blog.csdn.net/20150924210415548" alt="这里写图片描述"></p>
<p>这样就定义好了一个自定义属性集合“CircleView”，这个集合的名字随便起，在自定义View中通过这个集合的名字引用到这个集合，从而获取其中的属性</p>
<h3 id="1-2-在自定义的View中使用自定义属性"><a href="#1-2-在自定义的View中使用自定义属性" class="headerlink" title="1.2 在自定义的View中使用自定义属性"></a>1.2 在自定义的View中使用自定义属性</h3><p>假设创建一个自定义View叫 CircleView.java在其构造方法中使用自定义属性的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.tc.customview.view;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.content.res.TypedArray;</span><br><span class="line">import android.graphics.Color;</span><br><span class="line">import android.util.AttributeSet;</span><br><span class="line">import android.view.View;</span><br><span class="line"></span><br><span class="line">import com.tc.customview.R;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by tancen on 9/24/2015. 自定义圆形View</span><br><span class="line"> */</span><br><span class="line">public class CircleView extends View &#123;</span><br><span class="line"></span><br><span class="line">    private int mColor;</span><br><span class="line">	private float mRadius;</span><br><span class="line"></span><br><span class="line">    public CircleView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public CircleView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        this(context, attrs, 0);//调用含三个参数的构造方法</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public CircleView(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line"></span><br><span class="line">		//获取资源文件attrs.xml中的CircleView集合</span><br><span class="line">        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CircleView);</span><br><span class="line"></span><br><span class="line">        mColor = a.getColor(R.styleable.CircleView_circle_color, Color.BLUE);//获取颜色，如果没有设置这个属性，默认为蓝色</span><br><span class="line">		mRadius = a.getDimension(R.styleable.CircleView_circle_radius, 10);//获取半径，如果没有设置这个属性，默认为10</span><br><span class="line"></span><br><span class="line">        a.recycle();//释放资源</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-3在布局文件中使用自定义属性"><a href="#1-3在布局文件中使用自定义属性" class="headerlink" title="1.3在布局文件中使用自定义属性"></a>1.3在布局文件中使用自定义属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">                xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">                android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                android:layout_height=&quot;match_parent&quot;</span><br><span class="line">                android:gravity=&quot;center&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.tc.customview.view.CircleView</span><br><span class="line">        android:layout_width=&quot;200dp&quot;</span><br><span class="line">        android:layout_height=&quot;200dp&quot;</span><br><span class="line">        app:circle_color=&quot;@color/light_red&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p>关于申明命名空间，只需要保证在根布局申明的命名空间前缀“app”和自定义View中使用属性时的前缀一致就行了，当然是可以随便起名的，开心就好。</p>
<p>到此，自定义属性的定义，设置和调用就完成了。</p>
<h2 id="2-重写onMeasure方法"><a href="#2-重写onMeasure方法" class="headerlink" title="2.重写onMeasure方法"></a>2.重写onMeasure方法</h2><p>一般来说，自定义控件都会去重写View的onMeasure方法，因为该方法指定该控件<strong>在屏幕上的大小</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)</span><br></pre></td></tr></table></figure>
<p>  onMeasure传入的两个参数是由<strong>上一层控件</strong>传入的大小，有多种情况，重写该方法时需要计算控件的实际大小，然后调用<strong>setMeasuredDimension(int, int)</strong>设置实际大小。</p>
<p>  onMeasure传入的<strong>widthMeasureSpec</strong>和<strong>heightMeasureSpec</strong>不是一般的尺寸数值，而是将<strong>模式和尺寸组合</strong>在一起的数值。<br> 获取模式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int mode = MeasureSpec.getMode(widthMeasureSpec)</span><br></pre></td></tr></table></figure></p>
<p>获取尺寸：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int size = MeasureSpec.getSize(widthMeasureSpec)</span><br></pre></td></tr></table></figure></p>
<p> 模式（mode）共有三种情况：</p>
<ul>
<li><p><strong>MeasureSpec.EXACTLY</strong>：精确尺寸，将控件的layout_width或layout_height指定为<strong>具体数值</strong>时如andorid:layout_width=”50dip”，</p>
<pre><code>或者为**match_parent**时，都是控件大小已经确定的情况，都是精确尺寸。
</code></pre></li>
<li><p><strong>MeasureSpec.AT_MOST</strong>：最大尺寸，当控件的layout_width或layout_height指定为<strong>warp_content</strong>时，</p>
<pre><code>控件大小一般随着控件的子空间或内容进行变化，此时控件尺寸只要不超过父控件允许的最大尺寸即可。因此，此时的mode是AT_MOST，size给出了父控件允许的最大尺寸。
</code></pre></li>
<li><p><strong>MeasureSpec.UNSPECIFIED</strong>：未指定尺寸，这种情况不多，一般都是父控件是AdapterView，通过measure方法传入的模式。</p>
</li>
</ul>
<p>在重写onMeasure方法时要根据模式不同进行尺寸计算。思路很好理解，就是获取宽高的模式和尺寸，然后自定义一个逻辑，根据需求调用setMeasuredDimension方法，所以，不同的自定义View中下面的if else逻辑可能不同：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"> protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">     super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">     int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">     int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line"></span><br><span class="line">     int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">     int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">     //如果控件的width和height都设置为wrap_content,则给一个固定值，也就是这个控件默认就这么大</span><br><span class="line">     //联想系统控件比如Button在设置为wrap_content时，依然会占用一定的界面尺寸</span><br><span class="line">     if (widthSpecMode == MeasureSpec.AT_MOST &amp;&amp; heightSpecMode == ·MeasureSpec.AT_MOST) &#123;</span><br><span class="line">         setMeasuredDimension(200, 200);</span><br><span class="line">     &#125; else if (widthSpecMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">         //如果只有width设置为wrap_content，则height为精确值</span><br><span class="line">         setMeasuredDimension(200, heightSpecSize);</span><br><span class="line">     &#125; else if (heightSpecMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line"></span><br><span class="line">         //如果只有height设置为wrap_content，则width为精确值</span><br><span class="line">         setMeasuredDimension(widthSpecSize, 200);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-重写onDraw方法"><a href="#3-重写onDraw方法" class="headerlink" title="3.重写onDraw方法"></a>3.重写onDraw方法</h2><p>这个方法主要用于绘制界面，传入的参数是一个Canvas对象，作为整个View界面的画布，通过上一篇文章中 <a href="http://blog.csdn.net/ttccaaa/article/details/48690389" target="_blank" rel="noopener">Android自定义View—前奏篇(Paint和Canvas的使用)</a> 关于Paint和Canvas的使用，在这里就可以根据需求画出想要的界面</p>
<p><strong>记住一点 尽量不要在onDraw方法中创建对象</strong>，会报如下警告：</p>
<p><img src="http://img.blog.csdn.net/20150925223447294" alt="这里写图片描述"></p>
<p><strong>因为onDraw会经常运行，频繁创建对象会很浪费内存，在onDraw中的操作越少越好！！！</strong></p>
<p>当然，并不是一定不能在onDraw中创建对象，只是尽量不要。</p>
<p>一般情况下，Paint对象可以在构造方法中创建，这里需要注意，<strong>因为onDraw方法是频繁调用的，而Paint只创建一次</strong>，会造成一些意想不到的结果，因为Paint没有新建，上一次的Paint设置依然会在下一次的onDraw中使用。所以记得在onDraw方法中执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mPaint.reset();</span><br></pre></td></tr></table></figure>
<p>来重置一下Paint。</p>
<p>以下是一个典型的onDraw使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">  protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">      super.onDraw(canvas);</span><br><span class="line">      int width = getWidth();</span><br><span class="line">      int height = getHeight();</span><br><span class="line">      int radius = Math.min(width, height) / 2;//半径为宽和高这两个值中的最小值的一半</span><br><span class="line"></span><br><span class="line">      canvas.drawCircle(width / 2, height / 2, radius, mPaint);//画圆</span><br><span class="line"></span><br><span class="line">mPaint.reset();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>在代码中，获取到View的宽和高，然后画了一个圆</p>
<p>以上，一个简单的自定义View就实现了，接下来是实例</p>
<h2 id="4-实例一：自定义渐变的SeekBar"><a href="#4-实例一：自定义渐变的SeekBar" class="headerlink" title="4. 实例一：自定义渐变的SeekBar"></a>4. 实例一：自定义渐变的SeekBar</h2><p>首先上效果，如下：<br><img src="http://img.blog.csdn.net/20150926222656389" alt="这里写图片描述"></p>
<p>看到这个可能会想到之前的Shader渲染对象，这里选择LinearGradient渲染器来实现：</p>
<p>整个View的思路如下：</p>
<ul>
<li>预设三种颜色值，将整个View的宽分成三段来考虑</li>
<li>根据当前触摸屏幕的坐标，得到当前触摸在View中的位置</li>
<li>判断当前触摸的位置在View的哪一段，然后设置不同的渲染颜色（如果在1/3内，则只有一种颜色，如果在2/3内，则有两种颜色，以此类推）</li>
</ul>
<p>下面是实例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">package com.tc.customview.view;</span><br><span class="line"></span><br><span class="line">import android.annotation.SuppressLint;</span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.graphics.Canvas;</span><br><span class="line">import android.graphics.Color;</span><br><span class="line">import android.graphics.LinearGradient;</span><br><span class="line">import android.graphics.Paint;</span><br><span class="line">import android.graphics.RectF;</span><br><span class="line">import android.graphics.Shader;</span><br><span class="line">import android.util.AttributeSet;</span><br><span class="line">import android.view.MotionEvent;</span><br><span class="line">import android.view.View;</span><br><span class="line"></span><br><span class="line">public class SeekBarView extends View &#123;</span><br><span class="line"></span><br><span class="line">    private static final int[] SECTION_COLORS = &#123;0xffffd300, Color.GREEN, 0xff319ed4&#125;;</span><br><span class="line"></span><br><span class="line">    private float maxCount;//SeekBar的最大值，这个是在使用View时设定</span><br><span class="line">    private float currentCount;//SeekBar当前值，这个也可以在使用View时设定初始值</span><br><span class="line">    private Paint mPaint;</span><br><span class="line">    private int mWidth, mHeight;</span><br><span class="line"></span><br><span class="line">    private RectF rfBase;//底层圆角矩形</span><br><span class="line">    private RectF rfCover;//覆盖层圆角矩形，以上两个圆角矩形叠加构成一个圆角矩形线框</span><br><span class="line"></span><br><span class="line">    private RectF rfContent;//内容圆角矩形，用于填充渐变颜色并根据滑动进度改变</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public SeekBarView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public SeekBarView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        this(context, attrs, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public SeekBarView(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line">        mPaint = new Paint();</span><br><span class="line">        rfBase = new RectF();</span><br><span class="line">        rfCover = new RectF();</span><br><span class="line">        rfContent = new RectF();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">        int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec);</span><br><span class="line">        int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec);</span><br><span class="line"></span><br><span class="line">        int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec);</span><br><span class="line">        int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">        if (widthSpecMode == MeasureSpec.EXACTLY || widthSpecMode == MeasureSpec.AT_MOST) &#123;</span><br><span class="line">            mWidth = widthSpecSize;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mWidth = 0;</span><br><span class="line">        &#125;</span><br><span class="line">        if (heightSpecMode == MeasureSpec.AT_MOST || heightSpecMode == MeasureSpec.UNSPECIFIED) &#123;</span><br><span class="line">            mHeight = dpToPx(15);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mHeight = heightSpecSize;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        setMeasuredDimension(mWidth, mHeight);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private int dpToPx(int dp) &#123;</span><br><span class="line">        float scale = getContext().getResources().getDisplayMetrics().density;</span><br><span class="line">        return (int) (dp * scale + 0.5f * (dp &gt;= 0 ? 1 : -1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @SuppressLint(&quot;DrawAllocation&quot;)</span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        mPaint.setAntiAlias(true);</span><br><span class="line"></span><br><span class="line">        int round = mHeight / 2;</span><br><span class="line"></span><br><span class="line">        //画底层的圆角矩形</span><br><span class="line">        mPaint.setColor(Color.GRAY);</span><br><span class="line">        rfBase.set(0, 0, mWidth, mHeight);</span><br><span class="line">        canvas.drawRoundRect(rfBase, round, round, mPaint);</span><br><span class="line"></span><br><span class="line">        //在内部画一个圆角矩形，这样两个圆角矩形重叠就形成一个圆环，也就是一个线框</span><br><span class="line">        mPaint.setColor(Color.WHITE);</span><br><span class="line">        rfCover.set(2, 2, mWidth - 2, mHeight - 2);</span><br><span class="line">        canvas.drawRoundRect(rfCover, round, round, mPaint);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //得到当前位置占总宽度的比例</span><br><span class="line">        float section = currentCount / maxCount;</span><br><span class="line"></span><br><span class="line">        //创建内容圆角矩形，值的设定很好理解的，就不多说了</span><br><span class="line">        rfContent.set(2, 2, (mWidth - 2) * section, mHeight - 2);</span><br><span class="line"></span><br><span class="line">        //如果当前值的比例小于等于1/3,设置颜色为颜色数组中的第一个值</span><br><span class="line">        if (section &lt;= 1.0f / 3.0f) &#123;</span><br><span class="line">            if (section != 0.0f) &#123;</span><br><span class="line">                mPaint.setColor(SECTION_COLORS[0]);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                mPaint.setColor(Color.TRANSPARENT);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            int count = (section &lt;= 1.0f / 3.0f * 2) ? 2 : 3;</span><br><span class="line"></span><br><span class="line">            int[] colors = new int[count];</span><br><span class="line">            System.arraycopy(SECTION_COLORS, 0, colors, 0, count);</span><br><span class="line"></span><br><span class="line">            //下面得到的一个想对位置的颜色数组，作为LinearGradient的构造参数，如果构造参数中这个值为null，则颜色沿渐变线均匀分布</span><br><span class="line">            //对此理解不够，暂时没用，按照原博写下来，先放在这里</span><br><span class="line">//            float[] positions = new float[count];</span><br><span class="line">//            if (count == 2) &#123;</span><br><span class="line">//                positions[0] = 0.0f;</span><br><span class="line">//                positions[1] = 1.0f - positions[0];</span><br><span class="line">//            &#125; else &#123;</span><br><span class="line">//                positions[0] = 0.0f;</span><br><span class="line">//                positions[1] = (maxCount / 3) / currentCount;</span><br><span class="line">//                positions[2] = 1.0f - positions[0] * 2;</span><br><span class="line">//            &#125;</span><br><span class="line">//            positions[positions.length - 1] = 1.0f;</span><br><span class="line"></span><br><span class="line">            LinearGradient shader = new LinearGradient(3, 3, (mWidth - 3) * section, mHeight - 3, colors, null, Shader.TileMode.MIRROR);</span><br><span class="line">            mPaint.setShader(shader);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        canvas.drawRoundRect(rfContent, round, round, mPaint);</span><br><span class="line"></span><br><span class="line">        //一次绘制完成后一定要记得重置一下画笔</span><br><span class="line">        mPaint.reset();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onTouchEvent(MotionEvent event) &#123;</span><br><span class="line">        float x = event.getX();</span><br><span class="line">        float y = event.getY();</span><br><span class="line">        getParent().requestDisallowInterceptTouchEvent(true);</span><br><span class="line">        switch (event.getAction()) &#123;</span><br><span class="line">            case MotionEvent.ACTION_DOWN:</span><br><span class="line">                moved(x, y);</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_MOVE:</span><br><span class="line">                moved(x, y);</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_UP:</span><br><span class="line">                moved(x, y);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private void moved(float x, float y) &#123;</span><br><span class="line">        if (x &gt; mWidth) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        currentCount = maxCount * (x / mWidth);</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMaxCount(float maxCount) &#123;</span><br><span class="line">        this.maxCount = maxCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCurrentCount(float currentCount) &#123;</span><br><span class="line">        this.currentCount = currentCount &gt; maxCount ? maxCount : currentCount;</span><br><span class="line">        invalidate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public float getMaxCount() &#123;</span><br><span class="line">        return maxCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public float getCurrentCount() &#123;</span><br><span class="line">        return currentCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>界面布局代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">                android:layout_width=&quot;match_parent&quot;</span><br><span class="line">                android:layout_height=&quot;match_parent&quot;</span><br><span class="line">                android:gravity=&quot;center&quot;</span><br><span class="line">                android:padding=&quot;16dp&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;com.tc.customview.view.SeekBarView</span><br><span class="line">        android:id=&quot;@+id/seekView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;20dp&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p>使用时的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line">    private SeekBarView seekBarView;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        seekBarView = (SeekBarView) findViewById(R.id.seekBarView);</span><br><span class="line">        seekBarView.setMaxCount(100);</span><br><span class="line">        seekBarView.setCurrentCount(30);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="实例二：自定义闪烁文本的TextView"><a href="#实例二：自定义闪烁文本的TextView" class="headerlink" title="实例二：自定义闪烁文本的TextView"></a>实例二：自定义闪烁文本的TextView</h2><p>效果如下：<br><img src="http://img.blog.csdn.net/20150927160153097" alt="这里写图片描述"></p>
<p>整个View的思路如下：</p>
<ul>
<li>创建的自定义View继承自TextView</li>
<li>重写onSizeChanged方法（关于这个方法，下面会详细讲），获取到View的宽度和<strong>View的Paint</strong>，并对这个View的Paint设置渲染（到此，初始化完成了，接下来就是让这个渲染效果动起来）</li>
<li>在onDraw方法中计算偏移量，并设置渲染的动画效果，延时刷新View。</li>
</ul>
<p>以上是整个的思路，但是有两个新接触的东西需要说明一下：</p>
<ul>
<li><p>onSizeChanged方法：这个方法是在TextView的<strong>大小发生变化</strong>的时候调用（如果在xml文件中对View设置为match_parent或者具体的数值，则该方法只会在初始化的时候调用一次，也就是说，<strong>只有在wrap_content的情况下，改变View的大小才会调用这个方法</strong>，当然，这个还受到父控件的宽高属性的影响，具体可以通过几个简单的测试来了解）需要注意的是，这里的大小改变并不是值TextView的文本发生改变，而是整个View的尺寸大小发生了改变，比如宽度高度发生了改变。</p>
</li>
<li><p>Matrix类：代码中使用到了Matrix类来实现渲染的动画效果，Android中可以给渲染器设置一个变化的Matrix，可以设置平移，旋转，缩放等动画，这里使用的是平移动画，根据一个累加的偏移量得到平移的距离，然后如下图所示可以得到想要实现的动画的偏移量的临界条件：<br><img src="http://img.blog.csdn.net/20150927165750209" alt="这里写图片描述"></p>
</li>
</ul>
<p>把LinearGradient比作一个长方形，如上图，初始化的位置在手机屏幕的最左边，要运动到屏幕的最右边就需要2*width的长度。然后在onDraw方法中就开始计算移动的坐标，然后调用postInvalidate方法延迟去刷新界面。</p>
<p>接下来是实例代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">public class TwinklingTextView extends TextView &#123;</span><br><span class="line"></span><br><span class="line">    private LinearGradient mLinearGradient;</span><br><span class="line">    private Matrix mGradientMatrix;</span><br><span class="line">    private int mViewWidth = 0;//用于获取整个View的宽度</span><br><span class="line">    private int mTranslate = 0;//用于记录渲染的偏移量</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public TwinklingTextView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public TwinklingTextView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public TwinklingTextView(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onSizeChanged(int w, int h, int oldw, int oldh) &#123;</span><br><span class="line">        super.onSizeChanged(w, h, oldw, oldh);</span><br><span class="line"></span><br><span class="line">        //通过这个条件判断，可以保证只在初始化的时候调用一次</span><br><span class="line">        if (mViewWidth == 0) &#123;</span><br><span class="line">            mViewWidth = getMeasuredWidth();</span><br><span class="line">            if (mViewWidth &gt; 0) &#123;</span><br><span class="line">                //创建渐变渲染器</span><br><span class="line">                mLinearGradient = new LinearGradient(0, 0, mViewWidth, 0, new int[]&#123;0x33ffffff, 0xffffffff, 0x33ffffff&#125;, null, Shader.TileMode.CLAMP);</span><br><span class="line"></span><br><span class="line">                //对当前View的paint设置渲染</span><br><span class="line">                getPaint().setShader(mLinearGradient);</span><br><span class="line">                mGradientMatrix = new Matrix();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line">        if (mGradientMatrix != null) &#123;</span><br><span class="line"></span><br><span class="line">            mTranslate += mViewWidth / 10;</span><br><span class="line">            //可以看到这是一个循环的过程</span><br><span class="line">            if (mTranslate &gt; 2 * mViewWidth) &#123;</span><br><span class="line">                mTranslate = -mViewWidth;</span><br><span class="line">            &#125;</span><br><span class="line">            mGradientMatrix.setTranslate(mTranslate, 0);</span><br><span class="line">            mLinearGradient.setLocalMatrix(mGradientMatrix);</span><br><span class="line">            postInvalidateDelayed(50);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个例子中学习到了渲染器可以有动画的，可以对渲染器进行动画操作，这个知识点，在后面还会在用到。</p>
<h2 id="实例三：自定义颜色选择器"><a href="#实例三：自定义颜色选择器" class="headerlink" title="实例三：自定义颜色选择器"></a>实例三：自定义颜色选择器</h2><p>效果如下：<br><img src="http://img.blog.csdn.net/20150927222715059" alt="这里写图片描述"></p>
<p>思路如下：</p>
<ul>
<li>创建两个圆，一个圆环用于收集用户选择的颜色，一个实心圆用于显示用户当前选择的颜色</li>
<li>主要在onTouch方法中实现判断用户触摸的坐标是否在圆环内，然后计算的到触摸位置相对于圆环的比例，并计算的到当前的颜色值，最后设置实心圆的颜色</li>
<li>然后可以添加一个颜色选择的监听接口来获取选择的颜色值</li>
</ul>
<p>本例的重点是对onTouch的操作，关于在圆环的触摸点所占比例并以此计算的到一个颜色值，下面是我总结的一点内容，可能不够准确，但是能大概有个粗浅的理解：<br><img src="http://img.blog.csdn.net/20150927223637667" alt="这里写图片描述"></p>
<p>从图中可以看到，首先获取触摸点的坐标，然后计算得到其相对于圆心X轴的角度，通过角度又可以得到其相对于整个圆环的比例，然后根据这个比例就能计算的到当前比例位置的颜色值</p>
<p>下面是整个View的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">public class ColorPickerView extends View &#123;</span><br><span class="line"></span><br><span class="line">    private Paint mColorPaint;//颜色圆环的画笔</span><br><span class="line">    private Paint mCenterPaint;//中心圆的画笔</span><br><span class="line">    private int[] mColors;</span><br><span class="line"></span><br><span class="line">    private OnColorChangedListener mListener;//设置颜色的回调接口</span><br><span class="line"></span><br><span class="line">    private static final int CENTER_X = 240;</span><br><span class="line">    private static final int CENTER_Y = 240;</span><br><span class="line">    private static final int CENTER_RADIUS = 32;</span><br><span class="line"></span><br><span class="line">    private static final float PI = 3.1415926f;</span><br><span class="line"></span><br><span class="line">    public ColorPickerView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ColorPickerView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        this(context, attrs, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ColorPickerView(Context context, AttributeSet attrs, int defStyleAttr) &#123;</span><br><span class="line">        super(context, attrs, defStyleAttr);</span><br><span class="line"></span><br><span class="line">        mColors = new int[]&#123;//渐变色数组</span><br><span class="line">                0xFFFF0000, 0xFFFF00FF, 0xFF0000FF, 0xFF00FFFF, 0xFF00FF00,</span><br><span class="line">                0xFFFFFF00, 0xFFFF0000&#125;;</span><br><span class="line"></span><br><span class="line">        Shader s = new SweepGradient(0, 0, mColors, null);</span><br><span class="line"></span><br><span class="line">		//画外部颜色选择圆环</span><br><span class="line">        mColorPaint = new Paint(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">        mColorPaint.setShader(s);</span><br><span class="line">        mColorPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mColorPaint.setStrokeWidth(32);</span><br><span class="line"></span><br><span class="line">		//画中心的圆</span><br><span class="line">        mCenterPaint = new Paint(Paint.ANTI_ALIAS_FLAG);</span><br><span class="line">        mCenterPaint.setColor(Color.RED);</span><br><span class="line">        mCenterPaint.setStrokeWidth(15);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line">        //设置整个界面的宽高为圆的直径大小</span><br><span class="line">        setMeasuredDimension(CENTER_X * 2, CENTER_Y * 2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        //将画布的起始位置移动到中心位置，这样下面画圆形的时候直接设置圆心坐标为（0，0）即可</span><br><span class="line">        canvas.translate(CENTER_X, CENTER_Y);</span><br><span class="line"></span><br><span class="line">        //画外部的颜色选择环</span><br><span class="line">        canvas.drawCircle(0, 0, CENTER_RADIUS * 6, mColorPaint);</span><br><span class="line"></span><br><span class="line">        //画中心的圆形</span><br><span class="line">        canvas.drawCircle(0, 0, CENTER_RADIUS, mCenterPaint);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onTouchEvent(MotionEvent event) &#123;</span><br><span class="line"></span><br><span class="line">        //获取相对于圆心的坐标</span><br><span class="line">        float x = event.getX() - CENTER_X;</span><br><span class="line">        float y = event.getY() - CENTER_Y;</span><br><span class="line"></span><br><span class="line">        //判断当前触摸的位置是否在圆环内部</span><br><span class="line">        boolean isInRing = Math.sqrt(x * x + y * y) &lt;= CENTER_RADIUS;</span><br><span class="line"></span><br><span class="line">        switch (event.getAction()) &#123;</span><br><span class="line"></span><br><span class="line">            case MotionEvent.ACTION_DOWN:</span><br><span class="line">                invalidate();</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">            case MotionEvent.ACTION_MOVE:</span><br><span class="line">                //计算得到触摸点的角度</span><br><span class="line">                float angle = (float) Math.atan2(y, x);</span><br><span class="line"></span><br><span class="line">                //计算的到角度相对于整个圆的比例</span><br><span class="line">                float unit = angle / (2 * PI);</span><br><span class="line">                if (unit &lt; 0) &#123;</span><br><span class="line">                    unit += 1;</span><br><span class="line">                &#125;</span><br><span class="line">                mCenterPaint.setColor(interpColor(mColors, unit));</span><br><span class="line">                invalidate();</span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">            case MotionEvent.ACTION_UP:</span><br><span class="line">                if (isInRing) &#123;</span><br><span class="line">                    mListener.colorChanged(mCenterPaint.getColor());</span><br><span class="line">                &#125;</span><br><span class="line">                invalidate();</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 计算两个值之间的指定比例的值</span><br><span class="line">     * 假设开始值为0，结束值为1；比例为0时，结果为0；比例为1时，结果为1；比例为0.5时，结果就是0.5</span><br><span class="line">     *</span><br><span class="line">     * @param s 区域的开始值</span><br><span class="line">     * @param d 区域的结束值</span><br><span class="line">     * @param p 比例</span><br><span class="line">     * @return 四舍五入后的值</span><br><span class="line">     */</span><br><span class="line">    private int ave(int s, int d, float p) &#123;</span><br><span class="line">        return s + Math.round(p * (d - s));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 根据颜色数组和当前触摸点所在的比例计算得到颜色值，这个方法暂时理解不够</span><br><span class="line">     *</span><br><span class="line">     * @param colors 颜色数组</span><br><span class="line">     * @param unit   当前触摸点的比例</span><br><span class="line">     * @return 一个颜色值</span><br><span class="line">     */</span><br><span class="line">    private int interpColor(int colors[], float unit) &#123;</span><br><span class="line">        if (unit &lt;= 0) &#123;</span><br><span class="line">            return colors[0];</span><br><span class="line">        &#125;</span><br><span class="line">        if (unit &gt;= 1) &#123;</span><br><span class="line">            return colors[colors.length - 1];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        float p = unit * (colors.length - 1);</span><br><span class="line">        int i = (int) p;</span><br><span class="line"></span><br><span class="line">        p -= i;</span><br><span class="line"></span><br><span class="line">        int c0 = colors[i];</span><br><span class="line">        int c1 = colors[i + 1];</span><br><span class="line"></span><br><span class="line">        int a = ave(Color.alpha(c0), Color.alpha(c1), p);</span><br><span class="line">        int r = ave(Color.red(c0), Color.red(c1), p);</span><br><span class="line">        int g = ave(Color.green(c0), Color.green(c1), p);</span><br><span class="line">        int b = ave(Color.blue(c0), Color.blue(c1), p);</span><br><span class="line"></span><br><span class="line">        return Color.argb(a, r, g, b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public interface OnColorChangedListener &#123;</span><br><span class="line">        void colorChanged(int color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setOnColorChangedListener(OnColorChangedListener listener) &#123;</span><br><span class="line">        mListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="实例四-自定义圆形颜色渐变的SeekBar"><a href="#实例四-自定义圆形颜色渐变的SeekBar" class="headerlink" title="实例四 自定义圆形颜色渐变的SeekBar"></a>实例四 自定义圆形颜色渐变的SeekBar</h2><p>效果如下：<br><img src="http://img.blog.csdn.net/20151002135216136" alt="这里写图片描述"></p>
<p>思路和上一个例子的颜色选择器大致相同：</p>
<ul>
<li>首先画一个圆环，作为底部背景，在其上面画一个圆弧，作为跟着手指渐变的进度条</li>
<li>然后计算手指触摸的位置，通过角度转弧度计算，得到当前手指触摸点的弧度值</li>
<li>将弧度值更新到渐变圆弧<br>下面用一张图说明下大致过程：<br><img src="http://img.blog.csdn.net/20151002140035256" alt="这里写图片描述"></li>
</ul>
<p>以下是完整代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line">public class CircularSeekBar extends View &#123;</span><br><span class="line"></span><br><span class="line">    private OnSeekChangeListener mListener;</span><br><span class="line"></span><br><span class="line">    private Paint baseRing;//圆环背景画笔</span><br><span class="line"></span><br><span class="line">    private RectF rect;//渐变颜色环外接矩形</span><br><span class="line"></span><br><span class="line">    private Paint colorfulRing;//渐变颜色环画笔</span><br><span class="line"></span><br><span class="line">    private float cx;//圆环中心位置x坐标</span><br><span class="line"></span><br><span class="line">    private float cy;//圆环中心位置y坐标</span><br><span class="line"></span><br><span class="line">    private float ringWidth = 30;//圆环的宽度，默认为30</span><br><span class="line"></span><br><span class="line">    private float outerRadius;//圆环外部的半径</span><br><span class="line"></span><br><span class="line">    private float innerRadius;//圆环内部的半径，其实就是外部半径减去圆环宽度</span><br><span class="line"></span><br><span class="line">    private float ringRadius;//圆环的半径</span><br><span class="line"></span><br><span class="line">    private int angle = 0;//弧度值</span><br><span class="line"></span><br><span class="line">    private int maxProgress = 100;//最大进度值</span><br><span class="line"></span><br><span class="line">    private int progress;</span><br><span class="line"></span><br><span class="line">    private int progressPercent;</span><br><span class="line"></span><br><span class="line">    private boolean CALLED_FROM_ANGLE = false;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private static final int[] SECTION_COLORS = &#123;0xffffd300, Color.GREEN, 0xff319ed4, 0xffffd300&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public CircularSeekBar(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public CircularSeekBar(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        this(context, attrs, 0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public CircularSeekBar(Context context, AttributeSet attrs, int defStyle) &#123;</span><br><span class="line">        super(context, attrs, defStyle);</span><br><span class="line"></span><br><span class="line">        baseRing = new Paint();</span><br><span class="line">        rect = new RectF();</span><br><span class="line">        colorfulRing = new Paint();</span><br><span class="line"></span><br><span class="line">        baseRing.setColor(Color.GRAY);</span><br><span class="line">        colorfulRing.setColor(Color.parseColor(&quot;#ff33b5e5&quot;));</span><br><span class="line"></span><br><span class="line">        baseRing.setAntiAlias(true);</span><br><span class="line">        colorfulRing.setAntiAlias(true);</span><br><span class="line"></span><br><span class="line">        baseRing.setStrokeWidth(ringWidth);</span><br><span class="line">        colorfulRing.setStrokeWidth(ringWidth);</span><br><span class="line"></span><br><span class="line">        baseRing.setStyle(Paint.Style.STROKE);</span><br><span class="line">        colorfulRing.setStyle(Paint.Style.STROKE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</span><br><span class="line">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class="line"></span><br><span class="line">        int width = getWidth(); //获取控件的宽</span><br><span class="line">        int height = getHeight();// 获取控件的高</span><br><span class="line"></span><br><span class="line">        int size = (width &gt; height) ? height : width; // 选择最小的值作为圆环视图的直径</span><br><span class="line"></span><br><span class="line">        cx = width / 2; // 得到圆环视图的中心x坐标</span><br><span class="line">        cy = height / 2; //得到圆环视图的中心y坐标</span><br><span class="line">        outerRadius = size / 2; // 得到圆环外部半径</span><br><span class="line"></span><br><span class="line">        ringRadius = outerRadius - ringWidth / 2;//得到圆环的半径</span><br><span class="line"></span><br><span class="line">        innerRadius = outerRadius - ringWidth; // 得到圆环内部的半径</span><br><span class="line"></span><br><span class="line">        float left = cx - ringRadius; //  渐变圆环外接矩形左边坐标</span><br><span class="line">        float right = cx + ringRadius;//  渐变圆环外接矩形右边坐标</span><br><span class="line">        float top = cy - ringRadius;//    渐变圆环外接矩形上边坐标</span><br><span class="line">        float bottom = cy + ringRadius;// 渐变圆环外接矩形底部坐标</span><br><span class="line"></span><br><span class="line">        rect.set(left, top, right, bottom); //设置渐变圆环的位置</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @SuppressLint(&quot;DrawAllocation&quot;)</span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line"></span><br><span class="line">        SweepGradient shader = new SweepGradient(cx, cy, SECTION_COLORS, null);</span><br><span class="line">        Matrix matrix = new Matrix();</span><br><span class="line">        matrix.setRotate(-90, cx, cy);</span><br><span class="line">        shader.setLocalMatrix(matrix);</span><br><span class="line">        colorfulRing.setShader(shader);</span><br><span class="line"></span><br><span class="line">        //画背景圆环</span><br><span class="line">        canvas.drawCircle(cx, cy, ringRadius, baseRing);</span><br><span class="line">        //画渐变圆环，每次刷新界面主要是改变这里的angle的值</span><br><span class="line">        canvas.drawArc(rect, 270, angle, false, colorfulRing);</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean onTouchEvent(MotionEvent event) &#123;</span><br><span class="line">        float x = event.getX();</span><br><span class="line">        float y = event.getY();</span><br><span class="line">        this.getParent().requestDisallowInterceptTouchEvent(true);</span><br><span class="line">        switch (event.getAction()) &#123;</span><br><span class="line">            case MotionEvent.ACTION_DOWN:</span><br><span class="line">                moved(x, y, false);</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_MOVE:</span><br><span class="line">                moved(x, y, false);</span><br><span class="line">                break;</span><br><span class="line">            case MotionEvent.ACTION_UP:</span><br><span class="line">                moved(x, y, true);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void moved(float x, float y, boolean up) &#123;</span><br><span class="line">        //计算圆心到触摸点的直线距离，使用数学中的勾股定理</span><br><span class="line">        float distance = (float) Math.sqrt(Math.pow((x - cx), 2) + Math.pow((y - cy), 2));</span><br><span class="line"></span><br><span class="line">        //如果触摸点在外圆半径的一个适配区域内</span><br><span class="line">        if (distance &lt; outerRadius + 100 &amp;&amp; distance &gt; innerRadius - 100 &amp;&amp; !up) &#123;</span><br><span class="line"></span><br><span class="line">            //将角度转换成弧度</span><br><span class="line">            float degrees = (float) ((float) ((Math.toDegrees(Math.atan2(x - cx, cy - y)) + 360.0)) % 360.0);</span><br><span class="line"></span><br><span class="line">            //使弧度值永远为正</span><br><span class="line">            if (degrees &lt; 0) &#123;</span><br><span class="line">                degrees += 2 * Math.PI;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setAngle(Math.round(degrees));</span><br><span class="line">            invalidate();</span><br><span class="line"></span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            invalidate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAngle() &#123;</span><br><span class="line">        return angle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAngle(int angle) &#123;</span><br><span class="line">        this.angle = angle;</span><br><span class="line">        float donePercent = (((float) this.angle) / 360) * 100;</span><br><span class="line">        float progress = (donePercent / 100) * getMaxProgress();</span><br><span class="line">        setProgressPercent(Math.round(donePercent));</span><br><span class="line">        CALLED_FROM_ANGLE = true;</span><br><span class="line">        setProgress(Math.round(progress));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSeekBarChangeListener(OnSeekChangeListener listener) &#123;</span><br><span class="line">        mListener = listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public OnSeekChangeListener getSeekBarChangeListener() &#123;</span><br><span class="line">        return mListener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public float getRingWidth() &#123;</span><br><span class="line">        return ringWidth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRingWidth(float ringWidth) &#123;</span><br><span class="line">        this.ringWidth = ringWidth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public interface OnSeekChangeListener &#123;</span><br><span class="line">        void onProgressChange(CircularSeekBar view, int newProgress);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getMaxProgress() &#123;</span><br><span class="line">        return maxProgress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMaxProgress(int maxProgress) &#123;</span><br><span class="line">        this.maxProgress = maxProgress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getProgress() &#123;</span><br><span class="line">        return progress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProgress(int progress) &#123;</span><br><span class="line">        if (this.progress != progress) &#123;</span><br><span class="line">            this.progress = progress;</span><br><span class="line">            if (!CALLED_FROM_ANGLE) &#123;</span><br><span class="line">                int newPercent = (this.progress * 100) / this.maxProgress;</span><br><span class="line">                int newAngle = (newPercent * 360) / 100;</span><br><span class="line">                this.setAngle(newAngle);</span><br><span class="line">                this.setProgressPercent(newPercent);</span><br><span class="line">            &#125;</span><br><span class="line">            if (mListener != null) &#123;</span><br><span class="line">                mListener.onProgressChange(this, this.getProgress());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            CALLED_FROM_ANGLE = false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getProgressPercent() &#123;</span><br><span class="line">        return progressPercent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProgressPercent(int progressPercent) &#123;</span><br><span class="line">        this.progressPercent = progressPercent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRingBackgroundColor(int color) &#123;</span><br><span class="line">        baseRing.setColor(color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setProgressColor(int color) &#123;</span><br><span class="line">        colorfulRing.setColor(color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="实例五-自定义折线图"><a href="#实例五-自定义折线图" class="headerlink" title="实例五 自定义折线图"></a>实例五 自定义折线图</h2><p>效果如下：<br><img src="http://img.blog.csdn.net/20151004213035086" alt="这里写图片描述"></p>
<p>根据原博进行了一些修改，原博的这个例子是一个仿360流量表的例子，除了绘图外还有一些数值计算，为了简单直观的看到绘图的过程，这里我根据原博的思路，重新写了个只有一个折线图的自定义View，当然，要想实现原博的效果也不是很难，看一下源码就能理解。这个例子的步骤：</p>
<ul>
<li>画背景网格，先画竖线，再画横线，通过两个for循环就能实现</li>
<li>画折线图，本例中折线的高度使用了一个随机数</li>
<li>将path画会起点，根据path的使用方法，要想实现渲染效果，必须将其画回起点，形成一个封闭的折线</li>
</ul>
<p>下面是源码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">public class LineChartView extends View &#123;</span><br><span class="line"></span><br><span class="line">    private Paint gridPaint;</span><br><span class="line"></span><br><span class="line">    private Paint pathPaint;</span><br><span class="line"></span><br><span class="line">    private Paint pathEndPaint;</span><br><span class="line"></span><br><span class="line">    private static final int gridWidth = 45;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public LineChartView(Context context) &#123;</span><br><span class="line">        super(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public LineChartView(Context context, AttributeSet attrs) &#123;</span><br><span class="line">        super(context, attrs);</span><br><span class="line"></span><br><span class="line">        //初始化背景网格画笔</span><br><span class="line">        gridPaint = new Paint();</span><br><span class="line">        gridPaint.setColor(0xee000000);</span><br><span class="line">        gridPaint.setStrokeWidth((float) 2.0);</span><br><span class="line"></span><br><span class="line">        //初始化折线画笔</span><br><span class="line">        pathPaint = new Paint();</span><br><span class="line">        pathPaint.setAntiAlias(true);</span><br><span class="line">        pathPaint.setColor(0xffcd0000);</span><br><span class="line">        pathPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        pathPaint.setStrokeWidth((float) 1.0);</span><br><span class="line"></span><br><span class="line">        //初始化折线返回路线画笔，这个用于做出渲染效果</span><br><span class="line">        pathEndPaint = new Paint();</span><br><span class="line">        pathEndPaint.setAntiAlias(true);</span><br><span class="line">        pathEndPaint.setColor(0xffcd0000);</span><br><span class="line">        pathEndPaint.setStyle(Paint.Style.FILL);</span><br><span class="line"></span><br><span class="line">        //设置颜色渐变的渲染</span><br><span class="line">        Shader shader = new LinearGradient(0, 0, gridWidth * 10, gridWidth * 20, 0xffcd0000, 0x11cd6839, Shader.TileMode.CLAMP);</span><br><span class="line">        pathEndPaint.setShader(shader);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onDraw(Canvas canvas) &#123;</span><br><span class="line">        super.onDraw(canvas);</span><br><span class="line"></span><br><span class="line">        //画竖线</span><br><span class="line">        for (int i = 0; i &lt;= 20; i++) &#123;</span><br><span class="line">            canvas.drawLine(gridWidth * i, 0, gridWidth * i, gridWidth * 10, gridPaint);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //画横线</span><br><span class="line">        for (int j = 0; j &lt;= 10; j++) &#123;</span><br><span class="line">            canvas.drawLine(0, gridWidth * j, gridWidth * 20, gridWidth * j, gridPaint);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //画折线</span><br><span class="line">        drawPath(canvas);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void drawPath(Canvas canvas) &#123;</span><br><span class="line"></span><br><span class="line">        Path path = new Path();</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt;= 20; i++) &#123;</span><br><span class="line">            if (i == 0) &#123;</span><br><span class="line">                path.moveTo(0, 0);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                //折线的高度是一个随机数</span><br><span class="line">                path.lineTo(gridWidth * i, gridWidth * ((int) (Math.random() * 10)));</span><br><span class="line">            &#125;</span><br><span class="line">            canvas.drawPath(path, pathPaint);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        path.lineTo(gridWidth * 20, gridWidth * 10);</span><br><span class="line">        path.lineTo(0, gridWidth * 10);</span><br><span class="line">        path.close();</span><br><span class="line">        canvas.drawPath(path, pathEndPaint);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上，转载内容完成，再次感谢原博，通过原博学到很多关于自定义View的知识，通过这几个例子的练手，基本掌握了自定义View的使用。</p>

  </div>
</article>



      </div>
      
       <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-自定义属性的使用"><span class="toc-number">1.</span> <span class="toc-text">1. 自定义属性的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-创建attrs-xml文件，编辑自定义属性的内容"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 创建attrs.xml文件，编辑自定义属性的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-在自定义的View中使用自定义属性"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 在自定义的View中使用自定义属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3在布局文件中使用自定义属性"><span class="toc-number">1.3.</span> <span class="toc-text">1.3在布局文件中使用自定义属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-重写onMeasure方法"><span class="toc-number">2.</span> <span class="toc-text">2.重写onMeasure方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-重写onDraw方法"><span class="toc-number">3.</span> <span class="toc-text">3.重写onDraw方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-实例一：自定义渐变的SeekBar"><span class="toc-number">4.</span> <span class="toc-text">4. 实例一：自定义渐变的SeekBar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例二：自定义闪烁文本的TextView"><span class="toc-number">5.</span> <span class="toc-text">实例二：自定义闪烁文本的TextView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例三：自定义颜色选择器"><span class="toc-number">6.</span> <span class="toc-text">实例三：自定义颜色选择器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例四-自定义圆形颜色渐变的SeekBar"><span class="toc-number">7.</span> <span class="toc-text">实例四 自定义圆形颜色渐变的SeekBar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实例五-自定义折线图"><span class="toc-number">8.</span> <span class="toc-text">实例五 自定义折线图</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://09ae9c.com/2015/09/22/150922/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://09ae9c.com/2015/09/22/150922/&text=Android 自定义 View(2) -- 使用"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://09ae9c.com/2015/09/22/150922/&is_video=false&description=Android 自定义 View(2) -- 使用"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Android 自定义 View(2) -- 使用&body=Check out this article: http://09ae9c.com/2015/09/22/150922/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://09ae9c.com/2015/09/22/150922/&title=Android 自定义 View(2) -- 使用"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://09ae9c.com/2015/09/22/150922/&name=Android 自定义 View(2) -- 使用&description=&lt;p&gt;本文转自 &lt;a href=&#34;http://blog.csdn.net/jiangwei0910410003/article/details/42640665&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Android中自定义视图View之—前奏篇&lt;/a&gt;  稍有修改，感谢分享！&lt;/p&gt;
&lt;p&gt;考虑到篇幅和内容相关性，将其分为两篇文章，这里主要记录自定义View的具体使用&lt;br&gt;接上文 &lt;a href=&#34;http://blog.csdn.net/ttccaaa/article/details/48690389&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Android 自定义 View(1) – 基础&lt;/a&gt;&lt;/p&gt;"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$("#toc-footer").toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$("#share-footer").toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$("#nav-footer").toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

      
      <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 09AE9C
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

      <script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

<!-- Disqus Comments -->


    </div>
</body>
</html>
