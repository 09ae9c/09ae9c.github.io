<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="观察者模式软件开发中，特别是图形化界面的软件，经常需要一种“观察”的关系，比如界面中的按钮需要观察用户对它的点击操作，进度条需要观察后台下载的情况并实时更新自己显示的进度，界面 1 显示的数据需要根据界面 2 输入的数据的变化而变化，由此前人总结出了一种设计模式：观察者模式。  观察者模式(Observer Pattern) 定义对象之间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关">
<meta property="og:type" content="article">
<meta property="og:title" content="RxJava 基础使用">
<meta property="og:url" content="http://09ae9c.com/2016/12/27/201612272045/index.html">
<meta property="og:site_name" content="09AE9C&#39;s Blog">
<meta property="og:description" content="观察者模式软件开发中，特别是图形化界面的软件，经常需要一种“观察”的关系，比如界面中的按钮需要观察用户对它的点击操作，进度条需要观察后台下载的情况并实时更新自己显示的进度，界面 1 显示的数据需要根据界面 2 输入的数据的变化而变化，由此前人总结出了一种设计模式：观察者模式。  观察者模式(Observer Pattern) 定义对象之间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-01-19T15:16:04.467Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RxJava 基础使用">
<meta name="twitter:description" content="观察者模式软件开发中，特别是图形化界面的软件，经常需要一种“观察”的关系，比如界面中的按钮需要观察用户对它的点击操作，进度条需要观察后台下载的情况并实时更新自己显示的进度，界面 1 显示的数据需要根据界面 2 输入的数据的变化而变化，由此前人总结出了一种设计模式：观察者模式。  观察者模式(Observer Pattern) 定义对象之间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>RxJava 基础使用</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/01/22/201701222130/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2016/11/16/201611162120/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://09ae9c.com/2016/12/27/201612272045/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://09ae9c.com/2016/12/27/201612272045/&text=RxJava 基础使用"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://09ae9c.com/2016/12/27/201612272045/&is_video=false&description=RxJava 基础使用"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RxJava 基础使用&body=Check out this article: http://09ae9c.com/2016/12/27/201612272045/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://09ae9c.com/2016/12/27/201612272045/&name=RxJava 基础使用&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#观察者模式"><span class="toc-number">1.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RxJava-简介"><span class="toc-number">2.</span> <span class="toc-text">RxJava 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基础概念"><span class="toc-number">2.1.</span> <span class="toc-text">基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#导入依赖"><span class="toc-number">2.1.1.</span> <span class="toc-text">导入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Observable-被观察者"><span class="toc-number">2.1.2.</span> <span class="toc-text">创建 Observable(被观察者)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Observer-观察者"><span class="toc-number">2.1.3.</span> <span class="toc-text">创建 Observer(观察者)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#订阅"><span class="toc-number">2.1.4.</span> <span class="toc-text">订阅</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更多方法"><span class="toc-number">2.2.</span> <span class="toc-text">更多方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简化订阅"><span class="toc-number">2.2.1.</span> <span class="toc-text">简化订阅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件队列"><span class="toc-number">2.2.2.</span> <span class="toc-text">事件队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#线程控制"><span class="toc-number">2.2.3.</span> <span class="toc-text">线程控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#操作符"><span class="toc-number">2.3.</span> <span class="toc-text">操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-操作符"><span class="toc-number">2.3.1.</span> <span class="toc-text">Map 操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FlatMap-操作符"><span class="toc-number">2.3.2.</span> <span class="toc-text">FlatMap 操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">2.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        RxJava 基础使用
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">09AE9C's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2016-12-27T12:45:22.000Z" itemprop="datePublished">2016-12-27</time>
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Java/">Java</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h1><p>软件开发中，特别是图形化界面的软件，经常需要一种“观察”的关系，比如界面中的按钮需要观察用户对它的点击操作，进度条需要观察后台下载的情况并实时更新自己显示的进度，界面 1 显示的数据需要根据界面 2 输入的数据的变化而变化，由此前人总结出了一种设计模式：观察者模式。</p>
<blockquote>
<p>观察者模式(Observer Pattern) 定义对象之间的一种一对多依赖关系，使得每当一个对象状态发生改变时，其相关依赖对象皆得到通知并被自动更新</p>
</blockquote>
<p>在观察者模式中，有两个基本角色：Observable(被观察者)，Observer(观察者)，它们之间的关系是：观察者 –订阅–&gt; 被观察者；被观察者 –通知–&gt; 观察者；一个被观察者可以对应多个观察者，这种关系类似报社与用户的关系，报社是被观察者，用户是观察者，一个报社可以拥有多个用户，用户需要向报社订阅报纸，那么报社在有新刊出版时就会通知用户并把新刊送到用户家里</p>
<p>更多关于观察者模式介绍与示例代码，可以参考 <a href="https://gof.quanke.name/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F-Observer%20Pattern.html" target="_blank" rel="noopener">这篇文章</a></p>
<h1 id="RxJava-简介"><a href="#RxJava-简介" class="headerlink" title="RxJava 简介"></a>RxJava 简介</h1><blockquote>
<p>ReactiveX 是 Reactive Extensions 的缩写，一般简写为 Rx，最初是 LINQ 的一个扩展，由微软的架构师 Erik Meijer 领导的团队开发，在 2012 年 11 月开源，Rx 是一个编程模型，目标是提供一致的编程接口，帮助开发者更方便的处理异步数据流，Rx 库支持 .NET、JavaScript 和 C++，Rx 近几年越来越流行了，现在已经支持几乎全部的流行编程语言了，Rx 的大部分语言库由 ReactiveX 这个组织负责维护，比较流行的有 RxJava/RxJS/Rx.NET</p>
</blockquote>
<p>总结起来，RxJava 就是是一个实现异步操作的库，它相对于传统的 AsyncTask 和 Handler 具有代码简介，功能强大的优势，可以将很复杂的业务逻辑用简洁的代码实现。网络上关于 RxJava 的介绍以及使用的文章有很多，比如 <a href="https://mcxiaoke.gitbooks.io/rxdocs/content/Intro.html" target="_blank" rel="noopener">ReactiveX 文档中文版</a> 是 RxJava 官方文档的中文翻译版，详细的介绍了 RxJava 和它的各种操作，<a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a>是一篇通俗易懂的 RxJava 入门文章，通读全文后能够基本掌握 RxJava 的使用，<a href="https://zhuanlan.zhihu.com/p/20687178" target="_blank" rel="noopener">RxJava 系列</a> 是知乎专栏系列，通过示例代码介绍了 RxJava 的具体使用。</p>
<p><strong>目前 RxJava 已经发布了 2.x 版，相较于 1.x 有部分改进，语法也有一些不一样的地方，本文使用的是 RxJava 2.0.4 版</strong></p>
<h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><p>如同观察者模式，在 RxJava 中有两个基本角色：Observable(被观察者)，Observer(观察者)，它们之间存在 subscribe(订阅) 的关系，订阅的内容是 Event(事件)，下面通过代码来描述两者之间的关系</p>
<h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3><p>在 Android 平台使用 RxJava，需要导入 RxJava 和针对 Android 平台添加的 RxAndroid 这两个依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;io.reactivex.rxjava2:rxjava:2.0.4&apos;</span><br><span class="line">compile &apos;io.reactivex.rxjava2:rxandroid:2.0.1&apos;</span><br></pre></td></tr></table></figure></p>
<h3 id="创建-Observable-被观察者"><a href="#创建-Observable-被观察者" class="headerlink" title="创建 Observable(被观察者)"></a>创建 Observable(被观察者)</h3><p>Observable 即被观察者。按照报社和用户的关系理解，这里就是创建一个报社，并创建特定新刊然后通知订阅的用户</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.create(<span class="keyword">new</span> ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(ObservableEmitter&lt;String&gt; e)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">               Log.i(TAG, <span class="string">"Observable handle in Thread:"</span> + Thread.currentThread().getName());</span><br><span class="line">               <span class="comment">// do something...</span></span><br><span class="line">               </span><br><span class="line">               e.onNext(<span class="string">"hello"</span>);<span class="comment">// 通知用户</span></span><br><span class="line">               e.onComplete();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="创建-Observer-观察者"><a href="#创建-Observer-观察者" class="headerlink" title="创建 Observer(观察者)"></a>创建 Observer(观察者)</h3><p>Observer 接收来自被观察者的数据并根据需求处理，按照报社和用户的关系理解，这里就是用户收到报社寄过来的新刊</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Observer&lt;String&gt; observer = <span class="keyword">new</span> Observer&lt;String&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line">               Log.i(TAG, <span class="string">"onSubScribe"</span>);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">               Log.d(TAG, <span class="string">"onNext: "</span> + s);</span><br><span class="line">               Log.i(TAG, <span class="string">"Observer handle in Thread:"</span> + Thread.currentThread().getName());</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">               Log.d(TAG, <span class="string">"onError:"</span> + e.toString());</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               Log.i(TAG, <span class="string">"onComplete"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br></pre></td></tr></table></figure>
<h3 id="订阅"><a href="#订阅" class="headerlink" title="订阅"></a>订阅</h3><p>创建好 Observable 和 Observer 后，通过订阅将二者关联起来。当 Observable 产生事件后，会立即通知 Observer：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">observable.subscribe(observer);</span><br></pre></td></tr></table></figure>
<p>运行项目，得到输出结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onSubScribe</span><br><span class="line">Observable handle in Thread:main</span><br><span class="line">onNext: hello</span><br><span class="line">Observer handle in Thread:main</span><br><span class="line">onComplete</span><br></pre></td></tr></table></figure>
<p>通过分析可以看到，首先打印出 <code>onSubScribe</code>，这是在回调 <code>onSubscribe</code> 中产生的，这个回调方法是在 RxJava 2.x 新增的，用于取消 Observer 和 Observable 的连接，通过调用 <code>d.dispose()</code> 就能取消它们之间的关联，Observable 以后就不能接收到 Observable 发送的数据了，例如，修改上面 Observer 的代码，在 <code>onSubscribe()</code> 中调用 <code>d.dispose()</code> 方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line">    d.dispose();</span><br><span class="line">    Log.i(TAG, <span class="string">"onSubScribe"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>得到的结果是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onSubScribe</span><br><span class="line">Observable handle in Thread:main</span><br></pre></td></tr></table></figure></p>
<p>可以看出,在 Observable 产生事件后，Observer 仅仅调用了其 <code>onSubScribe()</code> 方法，并没有调用 <code>onNext()</code> 方法，说明此时已经取消了与 Observable 的关联，以后不再接收这个 Observable 的事件。</p>
<p>在 Android 中，由于<strong>“主线程中不能进行耗时操作，以防界面卡顿出现 ANR”</strong>，就需要通过异步操作将耗时操作放在子线程中进行，然后将结果回调给主线程，在 RxJava 之前，Android 系统自带的 AsyncTask 和 Handler 就是为了解决这个问题而诞生的，但是它们的使用比较繁琐，如果遇到复杂的逻辑，代码会变得不易于阅读，而 RxJava 通过自上而下的串式代码，流程代码变得非常直观简洁，功能强大而操作简便。当然这主要归功于 RxJava 的线程控制，它可以很方便的指定某一步操作所在的线程，<code>subscribeOn()</code> 用于指定<code>subscribe()</code>发生时所在的线程，<code>observeOn()</code> 用于指定 Observer 回调发生时所在的线程：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">observable</span><br><span class="line">        .subscribeOn(Schedulers.io())<span class="comment">// 在子线程中处理</span></span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())<span class="comment">// 在主线程中接收</span></span><br><span class="line">        .subscribe(observer);</span><br></pre></td></tr></table></figure></p>
<p>运行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onSubScribe</span><br><span class="line">Observable handle in Thread:RxCachedThreadScheduler-1</span><br><span class="line">onNext: hello</span><br><span class="line">Observer handle in Thread:main</span><br><span class="line">onComplete</span><br></pre></td></tr></table></figure></p>
<p>通过输出可以看到 Observable 处理事件是在 “RxCachedThreadScheduler-1” 这个线程完成，而处理回调结果是在 “main” 这个线程中完成的。</p>
<h2 id="更多方法"><a href="#更多方法" class="headerlink" title="更多方法"></a>更多方法</h2><p>上面的例子是 RxJava 最基本的使用，在实际开发中，还有很多灵活的使用方法，这里简单总结下</p>
<h3 id="简化订阅"><a href="#简化订阅" class="headerlink" title="简化订阅"></a>简化订阅</h3><p>创建一个 Observer，要重写它的 4 个方法，分别是 <code>onSubscribe()</code>、<code>onNext()</code>、<code>onError()</code>、<code>onComplete()</code>,但是并不是所有需求都需要这 4 个方法，因此可以通过匿名内部类简化订阅的方法，在 RxJava 1.x 中，使用 Action 来完成，而在 RxJava 2.x 中，这一操作交给了 Consumer，示例代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">observable.subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;<span class="comment">// 等同 onNext()</span></span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;, <span class="keyword">new</span> Consumer&lt;Throwable&gt;() &#123;<span class="comment">// 等同 onError()</span></span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Throwable throwable)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;, <span class="keyword">new</span> Action() &#123;<span class="comment">// 等同 onComplete()</span></span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br></pre></td></tr></table></figure></p>
<p>以上 3 个在 <code>subscribe()</code> 中传入的匿名内部类，等同于在创建 Observer 时需要重写的 3 个方法，并且可以根据需要只重写其中某几个，这是因为 <code>subscribe()</code> 有不同参数的重载实现，在使用时根据不同的需求重写不同的重载就可以了。</p>
<h3 id="事件队列"><a href="#事件队列" class="headerlink" title="事件队列"></a>事件队列</h3><p>创建一个被观察者的事件，可以通过 <code>Observable.create()</code>，这也是上面代码中的创建方式，显然这种方式只能创建一个单独的事件，RxJava 还提供了可以创建一系列事件的方法，比如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.just(<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>);</span><br></pre></td></tr></table></figure></p>
<p>通过 <code>just()</code> 这个方法创建了一个事件队列，将队列中的事件依次发送出去，<code>just()</code> 方法最多能够传入 10 个事件，如果有更多的事件，就可以使用<code>fromArray(T...items)</code> 或者 <code>fromIterable(Iterable&lt;? extends T&gt; source)</code> 来发送数组或者可迭代对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;<span class="comment">// 通过 Consumer 简化了订阅操作，只需要 onNext() 方法</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                Log.i(TAG, <span class="string">"accept: "</span> + s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<p>运行结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">accept: 1</span><br><span class="line">accept: 2</span><br><span class="line">accept: 3</span><br></pre></td></tr></table></figure></p>
<p>可以看到，通过这种方式可以很灵活的组合多个事件，按照一定顺序发送，并且由于在 RxJava 2.x 中的 Observer 多了一个回调方法 <code>onSubscribe()</code>，更方便了根据业务逻辑决定接受哪些事件，不接受哪些事件。</p>
<h3 id="线程控制"><a href="#线程控制" class="headerlink" title="线程控制"></a>线程控制</h3><p>RxJava 中使用 Scheduler 来实现线程切换，默认所有事件的处理和回调都在同一个线程中，除非指明处理和回调的线程。Scheduler 内置了几个 Scheduler:</p>
<ul>
<li>Schedulers.single(): 在主线程中执行操作，这是默认的 Scheduler</li>
<li>Schedulers.newThread(): 总是启用新线程，并在新线程执行操作</li>
<li>Schedulers.io(): I/O 操作（读写文件、读写数据库、网络信息交互等）所使用的 Scheduler</li>
<li>Schedulers.computation(): CPU 密集型计算所使用的 Scheduler</li>
<li>Schedulers.trampoline(): 当其他排队的任务完成后，在当前线程排队开始执行</li>
</ul>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><p>RxJava 功能强大的原因在于它拥有很多操作符，不同的操作符组合起来就能完成各种个样的需求，这些操作符可以对事件序列进行变换加工，操作符包括：创建操作，变换操作，过滤操作，结合操作，错误处理，辅助操作，条件和布尔操作，算术和聚合操作，异步操作，连接操作，转换操作，阻塞操作，字符串操作，这些操作通过灵活的组合，可以实现非常强大的功能，这里以常用的 map 操作符和 flatMap() 操作符为例，介绍使用方法，其他更多的操作法的介绍和使用，可以参考 <a href="https://mcxiaoke.gitbooks.io/rxdocs/content/Intro.html" target="_blank" rel="noopener">RxJava 官方文档中文版</a></p>
<h3 id="Map-操作符"><a href="#Map-操作符" class="headerlink" title="Map 操作符"></a>Map 操作符</h3><p><code>map()</code> 函数接受一个 Function&lt; inType,outType &gt;(其中 inType 指上面传下来时的数据类型，outType 指输出去的数据类型) 类型的参数，然后把这个函数应用到每一个 Observable 发射的事件上(考虑事件队列)，将发射的值转换成期望的值，例如将一组数字转换成字符串，可以这样实现：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">       .map(<span class="keyword">new</span> Function&lt;Integer, String&gt;() &#123;<span class="comment">//将输入的每个事件处理</span></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> String <span class="title">apply</span><span class="params">(Integer integer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">               <span class="keyword">return</span> String.valueOf(integer);<span class="comment">// 处理的具体逻辑是将 Integer 类型转换成 String 类型</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">       .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;<span class="comment">// 可以看到这里回调传入的数据类型已经变成了 Stirng 类型</span></span><br><span class="line">               Log.i(<span class="string">"TAG"</span>, <span class="string">"accept: "</span> + s);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure></p>
<p>Map 操作符的使用场景有很多，比如通过网络获取到 Json 数据，而需求只需要其中一部分，那么就可以用 Map 操作符在得到 Json 数据后对其解析并取出需要的部分。</p>
<h3 id="FlatMap-操作符"><a href="#FlatMap-操作符" class="headerlink" title="FlatMap 操作符"></a>FlatMap 操作符</h3><p><code>floatMap()</code> 函数将传入的事件包装成一个 Observable 对象，并让这个 Observable 自动发送事件，实现根据需求创建新的事件的功能，例如原本事件队列中只有一个事件“a,b,c,d,e,f,g”,现在要将他按照”,” 切分并发射出去，这样在事件队列中将增加 7 个事件，具体代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="string">"a,b,c,d,e,f,g"</span>)</span><br><span class="line">       .flatMap(<span class="keyword">new</span> Function&lt;String, ObservableSource&lt;String&gt;&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> ObservableSource&lt;String&gt; <span class="title">apply</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">               <span class="comment">//原本是一个事件，这里将其转换成一个拥有 7 个事件的 Observer 并触发</span></span><br><span class="line">               <span class="keyword">return</span> Observable.fromArray(s.split(<span class="string">","</span>));</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">       .subscribe(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">               Log.i(<span class="string">"TAG"</span>, <span class="string">"accept: "</span> + s);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure></p>
<p>FlatMap 操作符的使用场景也很丰富，比如可以根据上层传下来的结果来创建新的不同事件，这样将事件的创建放在了运行中，使得很多业务逻辑可以方便的实现。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上是对 RxJava 基础使用的介绍，RxJava 相对于传统的异步操作方法，最大的特点就是简洁且功能强大，灵活使用 RxJava 可以解决很多复杂的实际需求，下面通过一个小例子来看看 RxJava 在实际应用中的效果。</p>
<p>需求：通过对我校(黑龙江大学)校园应用门户网站的抓包分析，掌握了学生用户的登录流程，编写一个 Android 应用模拟登录校园应用门户网站。</p>
<p>登录流程如下：</p>
<ol>
<li>访问校园网主页，获取 Cookie 并保存</li>
<li>GET 请求获取登录页面的图片验证码</li>
<li>向自建的服务器发送图片验证码，得到解析结果(验证码识别过程)</li>
<li>POST 请求带上主页 Cookie，用户名，密码以及验证码字符串提交登录</li>
<li>对返回结果分析判断是否登录成功</li>
</ol>
<p>以上流程如果使用传统的 HTTPClient 操作，一个回调嵌套着另一个回调，代码会稍微复杂，而如果使用 RxJava + Retrofit 组合，代码流程就跟需求流程一样，从上往下一步接着一步，这里先给出最终完成的代码，以示代码的简洁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(HttpResultListener&lt;Boolean&gt; listener,<span class="keyword">final</span> String uid,<span class="keyword">final</span> String pwd)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    xywCookieService()</span><br><span class="line">            .hljuIndex()<span class="comment">//访问应用门户首页,获取 Cookie 并保存</span></span><br><span class="line">            .flatMap(<span class="keyword">new</span> Func1&lt;ResponseBody, Observable&lt;ResponseBody&gt;&gt;() &#123;<span class="comment">// 请求验证码</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Observable&lt;ResponseBody&gt; <span class="title">call</span><span class="params">(ResponseBody body)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> captchaService().requestCaptcha();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .flatMap(<span class="keyword">new</span> Func1&lt;ResponseBody, Observable&lt;String&gt;&gt;() &#123;<span class="comment">// 解析验证码</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Observable&lt;String&gt; <span class="title">call</span><span class="params">(ResponseBody body)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> parseCaptchaObservable(body);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .flatMap(<span class="keyword">new</span> Func1&lt;String, Observable&lt;Boolean&gt;&gt;() &#123;<span class="comment">// 登录校园网</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Observable&lt;Boolean&gt; <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> loginHLJUObservable(uid, pwd, s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .map(<span class="keyword">new</span> Func1&lt;Boolean, Boolean&gt;() &#123;<span class="comment">// 登录结果</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(Boolean aBoolean)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> aBoolean;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            .retry(<span class="number">3</span>)</span><br><span class="line">            .subscribeOn(Schedulers.io())<span class="comment">// 后台线程执行</span></span><br><span class="line">            .observeOn(AndroidSchedulers.mainThread())<span class="comment">// 结果在主线程接收</span></span><br><span class="line">            .subscribe(<span class="keyword">new</span> HttpResultSubscriber&lt;&gt;(listener));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#观察者模式"><span class="toc-number">1.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RxJava-简介"><span class="toc-number">2.</span> <span class="toc-text">RxJava 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#基础概念"><span class="toc-number">2.1.</span> <span class="toc-text">基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#导入依赖"><span class="toc-number">2.1.1.</span> <span class="toc-text">导入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Observable-被观察者"><span class="toc-number">2.1.2.</span> <span class="toc-text">创建 Observable(被观察者)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-Observer-观察者"><span class="toc-number">2.1.3.</span> <span class="toc-text">创建 Observer(观察者)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#订阅"><span class="toc-number">2.1.4.</span> <span class="toc-text">订阅</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更多方法"><span class="toc-number">2.2.</span> <span class="toc-text">更多方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简化订阅"><span class="toc-number">2.2.1.</span> <span class="toc-text">简化订阅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件队列"><span class="toc-number">2.2.2.</span> <span class="toc-text">事件队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#线程控制"><span class="toc-number">2.2.3.</span> <span class="toc-text">线程控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#操作符"><span class="toc-number">2.3.</span> <span class="toc-text">操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-操作符"><span class="toc-number">2.3.1.</span> <span class="toc-text">Map 操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FlatMap-操作符"><span class="toc-number">2.3.2.</span> <span class="toc-text">FlatMap 操作符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">2.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://09ae9c.com/2016/12/27/201612272045/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://09ae9c.com/2016/12/27/201612272045/&text=RxJava 基础使用"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://09ae9c.com/2016/12/27/201612272045/&is_video=false&description=RxJava 基础使用"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=RxJava 基础使用&body=Check out this article: http://09ae9c.com/2016/12/27/201612272045/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://09ae9c.com/2016/12/27/201612272045/&title=RxJava 基础使用"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://09ae9c.com/2016/12/27/201612272045/&name=RxJava 基础使用&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 09AE9C
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/09ae9c">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


